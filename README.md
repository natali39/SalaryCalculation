# SalaryCalculation

## Описание архитектуры

### Уровень бизнес-логики.<br>

Описаны модели сотрудников, представленные следующими классами:<br>

**Staff** - абстрактный класс, который содержит описание общих свойств для всех сотрудников и виртуальный метод GetSalary, который возвращет значение базовой ставки сотрудника, а в классах-наследниках переопределен в соответствии с тем, как расчитывается зарплата у каждого вида сторудников.<br>

От Staff наследуются классы:<br>
**HighLevelStaff**, описывающий сотрудников высшего уровня, у которых могут быть подчиненные.<br>
**Employee**, описывающий сотрудников первого уровня, не имеющих списка подчиненных. В нем переопределен метод расчета заработной платы GetSalary и в константах хранятся заданные для сотрудников данной группы коэффициенты для расчета.<br>

В свою очередь, класс HighLevelStaff является базовым для классов **Salesman** и **Manager**, в каждом из которых также переопределены методы для расчета зарплаты и определены константы, необходимые для вычислений.<br>

Класс **StaffService** служит для взаимодействия с репозиторием.<br>
Благодаря наличию интерфейса **IStaffRepository** в качестве репозитория можно использовать разные системы хранения данных без необходимости изменять код уровня бизнес логики.<br>

Класс **TimeCounter** является статическим и служит для вычисления количества полных лет, которые сотрудник отработал в компании, на дату расчета заработной платы.<br>

*Сейчас при расчете зарплаты не учитывается количество часов, которые должен был отработать сотрудник за месяц и сколько он фактичеси отработал. Нет возможности посчитать зарплату с учетом отгулов, больничных, переработок и т.п. При данной архитектуре приложения, мне кажется, можно добавить этот функционал без большого ущерба для существующего кода.*<br>

*Также можно добавить логику для формирования отчетов - класс с описанием структуры отчета и класс, описывающий механизмы его формирования.*<br>


### Уровень хранения данных.

На уровне доступа к данным используется **СУБД Sqlite** и технология **Entity Framework**.<br>

Логика взаимодействия с базой данных (CRUD-операции) описаны в классе **StaffRepository**.<br>
*Модель Staff уроня бизнес логики сопоставляется с моделью Staff уровня хранения данных. Сейчас это сопоставление выполнятся прямо в классе StaffRepository. В качестве улучшения кода можно было бы вынести маппинг моделей в отдельный класс.*


### Тесты
Написаны unit-тесты для проверки правильности расчета заработной платы у разных групп сотрудников при реализации различных сценариев.
